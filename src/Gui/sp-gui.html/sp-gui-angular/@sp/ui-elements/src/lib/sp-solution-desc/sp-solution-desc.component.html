@if (viewMode === 'both' || viewMode === 'html') {
  <div class="richeditor">
    <ngx-editor-menu [editor]="editor" [toolbar]="toolbar" [colorPresets]="colorPresets">
    </ngx-editor-menu>
    <ngx-editor [editor]="editor" [style.fontSize]="solutionFontSize" outputFormat="html"
      placeholder="Run solution engine with the 'play' button" [(ngModel)]="solutionHtml">
    </ngx-editor>
  </div>
}
@if (viewMode === 'both' || viewMode === 'txt') {
  <div [style.fontSize]="solutionFontSize" class="solutions">
    @for (move of rows; track $index) {
      @let prevItem = $index < 1 ? null : rows[$index - 1];
      @let prevMove = prevItem == null ? 0
      : prevItem.num + (prevItem.part == "l" ? 0 : 0.5);
      <!-- se esiste una mossa la gestisco come tale -->
      @let myMove = move.num + (move.part == "l" ? 0 : 0.5);
      @if (myMove === firstMove) {
        <hr />
      }
      @let lineBr = myMove < prevMove || prevItem == null || prevItem.zugzwang;
      @if (lineBr) {
        <div class="linebr"></div>
      }
      <lib-sp-solution-move
        [attr.data-moveno]="myMove"
        [attr.data-movenopre]="prevMove"
        [hideNum]="mode == 'inline' && !lineBr && prevItem != null && !move.refutes"
        [value]="move"
        [refutes]="move.refutes"
        [class]="[
          'solution',
          mode,
          move.threat ? 'threat' : '',
          move.zugzwang ? 'zugzwang' : '',
          move.isKey ? 'key' : '',
          move.refutes ? 'refutes' : '',
          prevMove == myMove ? 'demolition' : '',
        ].join(' ')"
      ></lib-sp-solution-move>
    }
  </div>
}
